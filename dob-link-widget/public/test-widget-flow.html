<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOB Link Widget - Complete Flow Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #3E54D3 0%, #2E44C3 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .test-section {
            margin-bottom: 40px;
            padding: 30px;
            border: 2px solid #f0f0f0;
            border-radius: 15px;
            background: #fafafa;
        }

        .test-section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .flow-timeline {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
            position: relative;
        }

        .flow-step {
            flex: 1;
            text-align: center;
            position: relative;
            padding: 20px 10px;
        }

        .flow-step::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #e0e0e0;
            border: 3px solid #ccc;
            z-index: 1;
        }

        .flow-step.active::before {
            background: #3E54D3;
            border-color: #2E44C3;
        }

        .flow-step.completed::before {
            background: #22C55E;
            border-color: #16A34A;
        }

        .flow-step::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 100%;
            width: 100%;
            height: 3px;
            background: #e0e0e0;
            transform: translateY(-50%);
        }

        .flow-step:last-child::after {
            display: none;
        }

        .flow-step.completed::after {
            background: #22C55E;
        }

        .flow-step-label {
            margin-top: 60px;
            font-size: 0.9rem;
            font-weight: 500;
            color: #666;
        }

        .flow-step.active .flow-step-label {
            color: #3E54D3;
        }

        .flow-step.completed .flow-step-label {
            color: #22C55E;
        }

        .performance-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: #3E54D3;
            margin-bottom: 5px;
        }

        .metric-label {
            color: #666;
            font-size: 0.9rem;
        }

        .metric-card.success .metric-value {
            color: #22C55E;
        }

        .metric-card.warning .metric-value {
            color: #F59E0B;
        }

        .metric-card.error .metric-value {
            color: #EF4444;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #3E54D3;
            color: white;
        }

        .btn-primary:hover {
            background: #2E44C3;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6B7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4B5563;
        }

        .btn-success {
            background: #22C55E;
            color: white;
        }

        .btn-success:hover {
            background: #16A34A;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .log-container {
            background: #1F2937;
            color: #F9FAFB;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9rem;
            max-height: 300px;
            overflow-y: auto;
            margin: 20px 0;
        }

        .log-entry {
            margin-bottom: 8px;
            padding: 5px 0;
        }

        .log-entry.info {
            color: #60A5FA;
        }

        .log-entry.success {
            color: #34D399;
        }

        .log-entry.warning {
            color: #FBBF24;
        }

        .log-entry.error {
            color: #F87171;
        }

        .log-entry.timing {
            color: #A78BFA;
        }

        .widget-preview {
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            margin: 30px 0;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .widget-preview.has-widget {
            border-color: #22C55E;
            background: #f0fdf4;
        }

        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .status-active {
            background: #dcfce7;
            color: #16A34A;
        }

        .status-inactive {
            background: #fee2e2;
            color: #DC2626;
        }

        .status-loading {
            background: #dbeafe;
            color: #2563EB;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3E54D3, #22C55E);
            width: 0%;
            transition: width 0.3s ease;
        }

        .test-config {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin: 20px 0;
        }

        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .config-item {
            display: flex;
            flex-direction: column;
        }

        .config-item label {
            font-weight: 500;
            margin-bottom: 5px;
            color: #374151;
        }

        .config-item input,
        .config-item select {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .config-item input:focus,
        .config-item select:focus {
            outline: none;
            border-color: #3E54D3;
            box-shadow: 0 0 0 3px rgba(62, 84, 211, 0.1);
        }

        @media (max-width: 768px) {
            .flow-timeline {
                flex-direction: column;
                gap: 20px;
            }

            .flow-step::after {
                display: none;
            }

            .controls {
                flex-direction: column;
            }

            .config-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ DOB Link Widget</h1>
            <p>Complete User Flow Test - Target: &lt; 10 seconds total</p>
        </div>

        <div class="content">
            <!-- Flow Timeline -->
            <div class="test-section">
                <h2>üìä User Flow Timeline</h2>
                <div class="flow-timeline">
                    <div class="flow-step" id="step-1">
                        <div class="flow-step-label">1. Widget Load</div>
                    </div>
                    <div class="flow-step" id="step-2">
                        <div class="flow-step-label">2. Wallet Connect</div>
                    </div>
                    <div class="flow-step" id="step-3">
                        <div class="flow-step-label">3. Amount Input</div>
                    </div>
                    <div class="flow-step" id="step-4">
                        <div class="flow-step-label">4. Payment Processing</div>
                    </div>
                    <div class="flow-step" id="step-5">
                        <div class="flow-step-label">5. Token Transfer</div>
                    </div>
                </div>
            </div>

            <!-- Performance Metrics -->
            <div class="test-section">
                <h2>‚ö° Performance Metrics</h2>
                <div class="performance-metrics">
                    <div class="metric-card" id="total-time">
                        <div class="metric-value">0.00s</div>
                        <div class="metric-label">Total Time</div>
                    </div>
                    <div class="metric-card" id="widget-load">
                        <div class="metric-value">0.00s</div>
                        <div class="metric-label">Widget Load</div>
                    </div>
                    <div class="metric-card" id="wallet-connect">
                        <div class="metric-value">0.00s</div>
                        <div class="metric-label">Wallet Connect</div>
                    </div>
                    <div class="metric-card" id="payment-process">
                        <div class="metric-value">0.00s</div>
                        <div class="metric-label">Payment Process</div>
                    </div>
                    <div class="metric-card" id="token-transfer">
                        <div class="metric-value">0.00s</div>
                        <div class="metric-label">Token Transfer</div>
                    </div>
                    <div class="metric-card" id="status">
                        <div class="metric-value">Ready</div>
                        <div class="metric-label">Status</div>
                    </div>
                </div>
            </div>

            <!-- Test Configuration -->
            <div class="test-section">
                <h2>‚öôÔ∏è Test Configuration</h2>
                <div class="test-config">
                    <div class="config-grid">
                        <div class="config-item">
                            <label for="tokenId">Token ID:</label>
                            <select id="tokenId">
                                <option value="SOL">SOL (Solar Energy)</option>
                                <option value="WND">WND (Wind Energy)</option>
                                <option value="HYD">HYD (Hydro Energy)</option>
                                <option value="GEO">GEO (Geothermal)</option>
                            </select>
                        </div>
                        <div class="config-item">
                            <label for="backgroundColor">Background Color:</label>
                            <select id="backgroundColor">
                                <option value="#FFFFFF">White</option>
                                <option value="#F8F9FA">Light Gray</option>
                                <option value="#E5F3FF">Light Blue</option>
                                <option value="#F0F9FF">Very Light Blue</option>
                            </select>
                        </div>
                        <div class="config-item">
                            <label for="preferredCurrency">Currency:</label>
                            <select id="preferredCurrency">
                                <option value="USD">USD</option>
                                <option value="EUR">EUR</option>
                                <option value="GBP">GBP</option>
                                <option value="JPY">JPY</option>
                            </select>
                        </div>
                        <div class="config-item">
                            <label for="testAmount">Test Amount (USDC):</label>
                            <input type="number" id="testAmount" value="100" min="10" max="10000" step="10">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="test-section">
                <h2>üéÆ Test Controls</h2>
                <div class="controls">
                    <button class="btn btn-primary" id="startTest">üöÄ Start Complete Flow Test</button>
                    <button class="btn btn-secondary" id="loadWidget">üì¶ Load Widget Only</button>
                    <button class="btn btn-secondary" id="resetTest">üîÑ Reset Test</button>
                    <button class="btn btn-success" id="runPerformanceTest">‚ö° Performance Test (10x)</button>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <!-- Widget Preview -->
            <div class="test-section">
                <h2>üëÄ Widget Preview</h2>
                <div class="widget-preview" id="widgetPreview">
                    <div>
                        <p style="color: #666; font-size: 16px;">Widget will appear here when loaded</p>
                        <p style="color: #999; font-size: 14px; margin-top: 10px;">Click "Load Widget" to test</p>
                    </div>
                </div>
                <div id="widgetStatus" class="status-indicator status-inactive">
                    <span>‚óè</span>
                    Widget Not Loaded
                </div>
            </div>

            <!-- Test Log -->
            <div class="test-section">
                <h2>üìù Test Log</h2>
                <div class="controls">
                    <button class="btn btn-secondary" id="clearLog">Clear Log</button>
                    <button class="btn btn-secondary" id="exportLog">Export Log</button>
                </div>
                <div class="log-container" id="logContainer">
                    <div class="log-entry info">[System] Test environment initialized</div>
                    <div class="log-entry info">[System] Ready to start complete flow test</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentWidget = null;
        let testStartTime = 0;
        let stepTimes = {};
        let isTestRunning = false;
        let performanceResults = [];

        // Widget configuration
        let widgetConfig = {
            tokenId: 'SOL',
            backgroundColor: '#FFFFFF',
            preferredCurrency: 'USD',
            hash: 'test-flow-' + Date.now()
        };

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
            updateConfigFromInputs();
            log('Test environment initialized', 'info');
        });

        // Event listeners
        function initializeEventListeners() {
            document.getElementById('startTest').addEventListener('click', startCompleteFlowTest);
            document.getElementById('loadWidget').addEventListener('click', loadWidgetOnly);
            document.getElementById('resetTest').addEventListener('click', resetTest);
            document.getElementById('runPerformanceTest').addEventListener('click', runPerformanceTest);
            document.getElementById('clearLog').addEventListener('click', clearLog);
            document.getElementById('exportLog').addEventListener('click', exportLog);

            // Config change listeners
            document.getElementById('tokenId').addEventListener('change', updateConfigFromInputs);
            document.getElementById('backgroundColor').addEventListener('change', updateConfigFromInputs);
            document.getElementById('preferredCurrency').addEventListener('change', updateConfigFromInputs);
            document.getElementById('testAmount').addEventListener('input', updateConfigFromInputs);
        }

        // Update config from input fields
        function updateConfigFromInputs() {
            widgetConfig.tokenId = document.getElementById('tokenId').value;
            widgetConfig.backgroundColor = document.getElementById('backgroundColor').value;
            widgetConfig.preferredCurrency = document.getElementById('preferredCurrency').value;
        }

        // Start complete flow test
        async function startCompleteFlowTest() {
            if (isTestRunning) return;
            
            isTestRunning = true;
            testStartTime = performance.now();
            stepTimes = {};
            
            log('üöÄ Starting complete flow test...', 'info');
            updateStatus('Running Test...', 'loading');
            updateProgress(0);
            
            try {
                // Step 1: Load Widget
                await executeStep(1, 'Widget Load', loadWidget);
                
                // Step 2: Wallet Connection
                await executeStep(2, 'Wallet Connect', simulateWalletConnect);
                
                // Step 3: Amount Input
                await executeStep(3, 'Amount Input', simulateAmountInput);
                
                // Step 4: Payment Processing
                await executeStep(4, 'Payment Processing', simulatePaymentProcessing);
                
                // Step 5: Token Transfer
                await executeStep(5, 'Token Transfer', simulateTokenTransfer);
                
                // Complete
                const totalTime = (performance.now() - testStartTime) / 1000;
                updateProgress(100);
                
                if (totalTime <= 10) {
                    log(`‚úÖ Test completed successfully in ${totalTime.toFixed(2)}s (Target: <10s)`, 'success');
                    updateStatus('Test Passed!', 'success');
                    updateMetric('status', 'PASSED', 'success');
                } else {
                    log(`‚ö†Ô∏è Test completed in ${totalTime.toFixed(2)}s (Target: <10s) - Performance needs improvement`, 'warning');
                    updateStatus('Test Failed - Too Slow', 'warning');
                    updateMetric('status', 'FAILED', 'error');
                }
                
                updateMetric('total-time', totalTime.toFixed(2) + 's', totalTime <= 10 ? 'success' : 'error');
                
            } catch (error) {
                log(`‚ùå Test failed: ${error.message}`, 'error');
                updateStatus('Test Failed', 'error');
                updateMetric('status', 'FAILED', 'error');
            }
            
            isTestRunning = false;
        }

        // Execute a test step
        async function executeStep(stepNumber, stepName, stepFunction) {
            const stepStartTime = performance.now();
            
            log(`üîÑ Starting step ${stepNumber}: ${stepName}`, 'info');
            updateStepStatus(stepNumber, 'active');
            
            try {
                await stepFunction();
                
                const stepTime = (performance.now() - stepStartTime) / 1000;
                stepTimes[stepName] = stepTime;
                
                log(`‚úÖ Step ${stepNumber} completed in ${stepTime.toFixed(2)}s`, 'success');
                updateStepStatus(stepNumber, 'completed');
                updateMetric(stepName.toLowerCase().replace(' ', '-'), stepTime.toFixed(2) + 's', 'success');
                
                const progress = (stepNumber / 5) * 100;
                updateProgress(progress);
                
                return stepTime;
                
            } catch (error) {
                log(`‚ùå Step ${stepNumber} failed: ${error.message}`, 'error');
                updateStepStatus(stepNumber, 'error');
                throw error;
            }
        }

        // Step functions
        async function loadWidget() {
            log('Loading widget...', 'info');
            
            if (currentWidget) {
                unloadWidget();
            }
            
            // Simulate widget loading
            await new Promise(resolve => setTimeout(resolve, 500));
            
            const widgetContainer = createWidgetContainer();
            document.getElementById('widgetPreview').appendChild(widgetContainer);
            document.getElementById('widgetPreview').classList.add('has-widget');
            
            currentWidget = widgetContainer;
            log('Widget loaded successfully', 'success');
        }

        async function simulateWalletConnect() {
            log('Simulating wallet connection...', 'info');
            
            // Simulate wallet connection delay
            await new Promise(resolve => setTimeout(resolve, 800));
            
            log('Wallet connected successfully', 'success');
        }

        async function simulateAmountInput() {
            const testAmount = document.getElementById('testAmount').value;
            log(`Setting investment amount: ${testAmount} USDC`, 'info');
            
            // Simulate amount input and validation
            await new Promise(resolve => setTimeout(resolve, 300));
            
            log('Amount input completed', 'success');
        }

        async function simulatePaymentProcessing() {
            log('Processing payment...', 'info');
            
            // Simulate payment processing (this is the longest step)
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            log('Payment processed successfully', 'success');
        }

        async function simulateTokenTransfer() {
            log('Transferring tokens to wallet...', 'info');
            
            // Simulate token transfer
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            log('Tokens transferred successfully', 'success');
        }

        // Load widget only
        function loadWidgetOnly() {
            log('Loading widget only...', 'info');
            loadWidget();
        }

        // Reset test
        function resetTest() {
            log('Resetting test...', 'info');
            
            // Reset UI
            for (let i = 1; i <= 5; i++) {
                updateStepStatus(i, 'inactive');
            }
            
            updateProgress(0);
            updateStatus('Ready', 'inactive');
            
            // Reset metrics
            updateMetric('total-time', '0.00s', '');
            updateMetric('widget-load', '0.00s', '');
            updateMetric('wallet-connect', '0.00s', '');
            updateMetric('payment-process', '0.00s', '');
            updateMetric('token-transfer', '0.00s', '');
            updateMetric('status', 'Ready', '');
            
            // Unload widget
            if (currentWidget) {
                unloadWidget();
            }
            
            isTestRunning = false;
            log('Test reset completed', 'info');
        }

        // Run performance test (10 iterations)
        async function runPerformanceTest() {
            log('üöÄ Starting performance test (10 iterations)...', 'info');
            
            performanceResults = [];
            
            for (let i = 1; i <= 10; i++) {
                log(`Running iteration ${i}/10...`, 'info');
                
                const startTime = performance.now();
                
                try {
                    await loadWidget();
                    await simulateWalletConnect();
                    await simulateAmountInput();
                    await simulatePaymentProcessing();
                    await simulateTokenTransfer();
                    
                    const totalTime = (performance.now() - startTime) / 1000;
                    performanceResults.push(totalTime);
                    
                    log(`Iteration ${i} completed in ${totalTime.toFixed(2)}s`, 'success');
                    
                } catch (error) {
                    log(`Iteration ${i} failed: ${error.message}`, 'error');
                    performanceResults.push(null);
                }
                
                // Small delay between iterations
                await new Promise(resolve => setTimeout(resolve, 500));
            }
            
            // Calculate statistics
            const validResults = performanceResults.filter(r => r !== null);
            const avgTime = validResults.reduce((a, b) => a + b, 0) / validResults.length;
            const minTime = Math.min(...validResults);
            const maxTime = Math.max(...validResults);
            
            log(`üìä Performance Test Results:`, 'info');
            log(`   Average: ${avgTime.toFixed(2)}s`, 'timing');
            log(`   Min: ${minTime.toFixed(2)}s`, 'timing');
            log(`   Max: ${maxTime.toFixed(2)}s`, 'timing');
            log(`   Success Rate: ${validResults.length}/10 (${(validResults.length/10*100).toFixed(0)}%)`, 'timing');
            
            if (avgTime <= 10) {
                log(`‚úÖ Performance test PASSED - Average time within target`, 'success');
            } else {
                log(`‚ö†Ô∏è Performance test FAILED - Average time exceeds target`, 'warning');
            }
        }

        // Helper functions
        function createWidgetContainer() {
            const container = document.createElement('div');
            container.style.cssText = `
                background: ${widgetConfig.backgroundColor};
                border-radius: 12px;
                padding: 20px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                min-width: 300px;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            `;
            
            container.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                    <h3 style="margin: 0; color: #333; font-size: 18px;">${widgetConfig.tokenId} Token</h3>
                    <button onclick="closeWidget()" style="background: none; border: none; font-size: 20px; cursor: pointer; color: #666;">√ó</button>
                </div>
                <div style="margin-bottom: 15px;">
                    <p style="margin: 0 0 10px 0; color: #666; font-size: 14px;">Current Price: <strong style="color: #333;">$${(Math.random() * 100 + 50).toFixed(2)}</strong></p>
                    <p style="margin: 0; color: #666; font-size: 14px;">Currency: <strong style="color: #333;">${widgetConfig.preferredCurrency}</strong></p>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button style="flex: 1; background: #3E54D3; color: white; border: none; padding: 12px; border-radius: 6px; font-weight: 600; cursor: pointer;">Buy ${widgetConfig.tokenId}</button>
                    <button style="background: #6c757d; color: white; border: none; padding: 12px; border-radius: 6px; font-weight: 600; cursor: pointer;">View Details</button>
                </div>
                <div style="margin-top: 10px; text-align: center;">
                    <small style="color: #999; font-size: 12px;">Hash: ${widgetConfig.hash}</small>
                </div>
            `;
            
            return container;
        }

        function unloadWidget() {
            if (currentWidget) {
                currentWidget.remove();
                currentWidget = null;
            }
            
            const preview = document.getElementById('widgetPreview');
            preview.innerHTML = `
                <div>
                    <p style="color: #666; font-size: 16px;">Widget will appear here when loaded</p>
                    <p style="color: #999; font-size: 14px; margin-top: 10px;">Click "Load Widget" to test</p>
                </div>
            `;
            preview.classList.remove('has-widget');
        }

        function closeWidget() {
            unloadWidget();
        }

        function updateStepStatus(stepNumber, status) {
            const step = document.getElementById(`step-${stepNumber}`);
            step.className = `flow-step ${status}`;
        }

        function updateProgress(percentage) {
            document.getElementById('progressFill').style.width = percentage + '%';
        }

        function updateStatus(text, type) {
            const statusEl = document.getElementById('widgetStatus');
            statusEl.textContent = text;
            statusEl.className = `status-indicator status-${type}`;
        }

        function updateMetric(id, value, type) {
            const metricEl = document.getElementById(id);
            if (metricEl) {
                const valueEl = metricEl.querySelector('.metric-value');
                valueEl.textContent = value;
                metricEl.className = `metric-card ${type}`;
            }
        }

        function log(message, type = 'info') {
            const logContainer = document.getElementById('logContainer');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.textContent = `[${timestamp}] ${message}`;
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        function clearLog() {
            document.getElementById('logContainer').innerHTML = '';
            log('Log cleared', 'info');
        }

        function exportLog() {
            const logContainer = document.getElementById('logContainer');
            const logText = logContainer.textContent;
            const blob = new Blob([logText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `dob-link-test-log-${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html> 